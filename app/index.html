<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hypertension Detection - Professional Health Assessment System</title>

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary-medical: #4C1D95;
      --light-bg: #F5F3FF;
      --neutral-gray: #6B7280;
      --white: #FFFFFF;
      --shadow-md: 0 6px 16px rgba(0,0,0,0.08);
      --risk-low: #16A34A;
      --risk-moderate: #F59E0B;
      --risk-high: #DC2626;
      --bullet-blue: #3B82F6;
    }

    body {
      font-family: "Inter", sans-serif;
      background: var(--light-bg);
      margin: 0;
    }

    .header {
      background: linear-gradient(135deg, #4C1D95, #6D28D9);
      color: white;
      padding: 1.6rem;
      text-align: center;
      box-shadow: var(--shadow-md);
    }

    .header h1 {
      font-family: "Playfair Display", serif;
      margin-bottom: 0.3rem;
    }

    .container {
      display: flex;
      max-width: 1200px;
      margin: 2rem auto;
      gap: 1.2rem;
      padding: 0 1rem;
      flex-wrap: wrap;
    }

    /* Left Box */
    .left-box {
      flex: 2;
      background: var(--white);
      padding: 1.5rem;
      border-radius: 14px;
      box-shadow: var(--shadow-md);
    }

    /* Right Box */
    .right-box {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .card {
      background: var(--white);
      padding: 1rem;
      border-radius: 12px;
      box-shadow: var(--shadow-md);
    }

    /* Form Styling */
    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: #1F2937;
    }

    label i {
      color: #4C1D95;
      margin-right: 0.4rem;
    }

    select {
      padding: 0.55rem;
      border-radius: 6px;
      border: 1px solid #D1D5DB;
      font-size: 0.9rem;
    }

    button {
      grid-column: span 2;
      margin-top: 0.8rem;
      padding: 0.8rem;
      border-radius: 10px;
      border: none;
      background: #4C1D95;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    button:hover {
      background: #5B21B6;
    }

    @media(max-width: 900px) {
      form { grid-template-columns: 1fr; }
      button { grid-column: span 1; }
    }

    /* Prediction Card */
    .prediction-card {
      margin: 1rem 0 1.5rem 0;
      padding: 1.2rem;
      border-radius: 12px;
      background: #fff;
      box-shadow: var(--shadow-md);
      border-left: 6px solid;
    }

    .prediction-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-weight: 600;
      font-size: 1.2rem;
    }

    .prediction-header i {
      font-size: 1.4rem;
    }

    .prediction-confidence {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.6rem;
      font-size: 0.95rem;
    }

    .prediction-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 8px;
      color: white;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 0.6rem;
    }

    .prediction-text {
      color: #4B5563;
      margin-top: 0.7rem;
      font-size: 0.9rem;
    }

    .prediction-reco-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.8rem;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .prediction-actions {
      list-style: none;
      padding-left: 0;
      margin-top: 0.5rem;
    }

    .prediction-actions li {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.4rem;
      padding: 0.5rem 0.8rem;
      border-radius: 10px;
      background: linear-gradient(to right, #EFF6FF, #DBEAFE);
      border-left: 6px solid var(--bullet-blue);
      font-size: 0.9rem;
    }

    /* Right Box Cards */
    .card h3 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #4C1D95;
      font-size: 1.05rem;
      margin-bottom: 0.4rem;
    }

    .card h3 i { color: #4C1D95; }

    .card p {
      font-size: 0.9rem;
      color: #4B5563;
      margin-bottom: 0.6rem;
      line-height: 1.4;
    }

    .card ul li {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
      font-size: 0.9rem;
    }

    .card ul li i { color: #6D28D9; margin-top: 0.2rem; }
  </style>
</head>
<body>

<div class="header">
  <h1><i class="fa-solid fa-heart-pulse"></i> Hypertension Detection</h1>
  <p>AI-Powered Cardiovascular Risk Assessment Platform</p>
</div>

<div class="container">

  <!-- Left Box -->
  <div class="left-box">
    <h2>Comprehensive Health Assessment</h2>
    <p style="color:var(--neutral-gray)">Complete the questionnaire for personalized risk evaluation.</p>

    <!-- Prediction Card -->
    {% if prediction_text %}
    <div class="prediction-card" style="border-left-color:
      {% if risk_class=='low-risk' %}#16A34A{% elif risk_class=='moderate-risk' %}#F59E0B{% else %}#DC2626{% endif %};">
      <div class="prediction-header">
        <i class="fa-solid
          {% if risk_class=='low-risk' %}fa-circle-check{% elif risk_class=='moderate-risk' %}fa-triangle-exclamation{% else %}fa-circle-xmark{% endif %}"
          style="color:
          {% if risk_class=='low-risk' %}#16A34A{% elif risk_class=='moderate-risk' %}#F59E0B{% else %}#DC2626{% endif %};"></i>
        <span>
          {% if risk_class=='low-risk' %}Normal Blood Pressure{% elif risk_class=='moderate-risk' %}High Blood Pressure (Stage 1){% else %}High Blood Pressure (Stage 2){% endif %}
        </span>
        <span class="prediction-badge" style="background-color:
          {% if risk_class=='low-risk' %}#16A34A{% elif risk_class=='moderate-risk' %}#F59E0B{% else %}#DC2626{% endif %};">
          {% if risk_class=='low-risk' %}LOW{% elif risk_class=='moderate-risk' %}MODERATE{% else %}HIGH{% endif %}
        </span>
      </div>
      <div class="prediction-confidence">
        <i class="fa-solid fa-chart-pie"></i>
        Confidence: <strong>{{ confidence|round(2) }}%</strong>
      </div>
      <div class="prediction-text">
        Your cardiovascular risk assessment indicates
        {% if risk_class=='low-risk' %}normal blood pressure levels.{% elif risk_class=='moderate-risk' %}elevated blood pressure (Stage 1).{% else %}high blood pressure (Stage 2).{% endif %}
      </div>
      <div class="prediction-reco-title">
        <i class="fa-solid fa-list-check"></i> Clinical Recommendations
      </div>
      <ul class="prediction-actions">
        {% for action in recommendation.actions %}
        <li>
          <i class="fa-solid fa-arrow-right" style="color:var(--bullet-blue);"></i>
          {{ action }}
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul style="color:red;">
          {% for category, message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Form Starts Here -->
    <form action="/predict" method="post">

      <!-- Personal Information -->
      <div class="form-group">
        <label><i class="fa-solid fa-venus-mars"></i> Gender</label>
        <select name="Gender" required>
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-user-clock"></i> Age Group</label>
        <select name="Age" required>
          <option value="">Select</option>
          <option value="18-34">18-34</option>
          <option value="35-50">35-50</option>
          <option value="51-64">51-64</option>
          <option value="65+">65+</option>
        </select>
      </div>

    <!-- Medical History -->
      <div class="form-group">
        <label><i class="fa-solid fa-people-group"></i> Family History</label>
        <select name="History" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-user-doctor"></i> Under Medical Care</label>
        <select name="Patient" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-pills"></i> Taking Medication</label>
        <select name="TakeMedication" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-calendar-days"></i> Time Since Diagnosis</label>
        <select name="Whendiagnosed" required>
          <option value="">Select</option>
          <option value="<1 Year">&lt;1 Year</option>
          <option value="1-5 Years">1-5 Years</option>
          <option value=">5 Years">&gt;5 Years</option>
        </select>
      </div>

      <!-- Symptoms & Measurements -->
      <div class="form-group">
        <label><i class="fa-solid fa-gauge-high"></i> Symptom Severity</label>
        <select name="Severity" required>
          <option value="">Select</option>
          <option value="Mild">Mild</option>
          <option value="Moderate">Moderate</option>
          <option value="Severe">Severe</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-lungs"></i> Shortness of Breath</label>
        <select name="BreathShortness" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-eye"></i> Vision Changes</label>
        <select name="VisualChanges" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-droplet"></i> Nose Bleeding</label>
        <select name="NoseBleeding" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-arrow-up-wide-short"></i> Systolic</label>
        <select name="Systolic" required>
          <option value="">Select</option>
          <option value="100-110">100-110</option>
          <option value="111-120">111-120</option>
          <option value="121-130">121-130</option>
          <option value="130+">130+</option>
        </select>
      </div>

      <div class="form-group">
        <label><i class="fa-solid fa-arrow-down-wide-short"></i> Diastolic</label>
        <select name="Diastolic" required>
          <option value="">Select</option>
          <option value="70-80">70-80</option>
          <option value="81-90">81-90</option>
          <option value="91-100">91-100</option>
          <option value="100+">100+</option>
        </select>
      </div>

      <div class="form-group full-width">
        <label><i class="fa-solid fa-apple-whole"></i> Heart Healthy Diet</label>
        <select name="ControlledDiet" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </div>

      <button type="submit" class="full-width">Generate Risk Assessment</button>
    </form>


  </div>

  <!-- Right Box -->
  <div class="right-box">

    <div class="card">
      <h3><i class="fa-solid fa-microchip"></i> About the System</h3>
      <p>Our AI-powered platform analyzes multiple cardiovascular risk factors using advanced machine learning algorithms trained on validated clinical data to support early hypertension detection.</p>
      <ul>
        <li><i class="fa-solid fa-brain"></i> AI-driven clinical analysis</li>
        <li><i class="fa-solid fa-clipboard-check"></i> Guideline-based evaluation</li>
        <li><i class="fa-solid fa-user-shield"></i> Personalized medical recommendations</li>
      </ul>
    </div>

    <div class="card">
      <h3><i class="fa-solid fa-heart-circle-check"></i> Blood Pressure Guidelines</h3>
      <table style="width:100%; border-collapse: separate; border-spacing:0; margin-top:0.7rem; font-size:0.95rem; box-shadow:0 4px 8px rgba(0,0,0,0.05); border-radius:8px; overflow:hidden;">
        <thead style="background-color:#4C1D95; color:white;">
          <tr>
            <th style="padding:10px 12px; text-align:left;">Category</th>
            <th style="padding:10px 12px; text-align:left;">Systolic (mm Hg)</th>
            <th style="padding:10px 12px; text-align:left;">Diastolic (mm Hg)</th>
          </tr>
        </thead>
        <tbody>
          <tr style="background-color:#D1FAE5;">
            <td style="padding:8px 12px;">Normal</td>
            <td style="padding:8px 12px;">&lt; 120</td>
            <td style="padding:8px 12px;">&lt; 80</td>
          </tr>
          <tr style="background-color:#FEF3C7;">
            <td style="padding:8px 12px;">Elevated</td>
            <td style="padding:8px 12px;">120–129</td>
            <td style="padding:8px 12px;">&lt; 80</td>
          </tr>
          <tr style="background-color:#FED7AA;">
            <td style="padding:8px 12px;">Stage 1</td>
            <td style="padding:8px 12px;">130–139</td>
            <td style="padding:8px 12px;">80–89</td>
          </tr>
          <tr style="background-color:#FB923C; color:white;">
            <td style="padding:8px 12px;">Stage 2</td>
            <td style="padding:8px 12px;">≥ 140</td>
            <td style="padding:8px 12px;">≥ 90</td>
          </tr>
          <tr style="background-color:#EF4444; color:white;">
            <td style="padding:8px 12px;">Hypertensive Crisis</td>
            <td style="padding:8px 12px;">> 180</td>
            <td style="padding:8px 12px;">> 120</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
</body>
</html>
